<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>{{ page_title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="{{ resource.bootstrap_css }}" rel="stylesheet" media="screen">
    <link href="/css/icons.css" rel="stylesheet" media="screen">
    <style>
        body {
            padding-top: {% if container.count %}110{% else %}60{% endif %}px;
        }

        h2 a {
            color: #5f5f5f;
        }

        /*.field-string {
            font-weight: bold;
        }*/
    </style>
</head>
<body>
<div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
        <div class="container">

            <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target=".navbar-responsive-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" style="max-width: none;" href="{{ panel_base_uri }}/">{{ page_title }}</a>

            <div class="nav-collapse collapse navbar-responsive-collapse">
                <ul class="nav navbar-nav pull-right">
                    <li class="dropdown" id="menu1">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#menu1">
                            {% if current_user.photo %}
                                <img src="{{ current_user.photo }}" alt="" width="22" height="22"/>&nbsp;
                            {% endif %}{% if current_user.full_name %}&nbsp;&nbsp;{{ current_user.full_name }}
                            {% else %}{{ current_user.login }}
                            {% endif %}
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="{{ panel_base_uri }}/logout?csrf_token={{ csrf_token }}">Выход</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% if container.count %}
    <div class="navbar navbar-fixed-top" style="margin-top: 50px;">
        <div class="pull-left">
            <p class="navbar-text">
                Отображено
                <span id="display-info-total" style="font-weight: bold;">{{ container.count }}</span>
                элементов на странице
            </p>
        </div>
        <div class="pull-right">
            <button class="btn btn-success" style="margin-top: 5px;"
                    onclick="">
                <i class="icon-plus icon-white"></i>&nbsp;<span id="addmsg">{{ container.create_new_message }}</span>
            </button>
            <button class="btn btn-info" style="margin-top: 5px;"
                    onclick="$('#updt').html('обновление...');$(this).addClass('disabled');window.location.reload();">
                <i class="icon-refresh icon-white"></i>&nbsp;<span id="updt">обновить страницу</span>
            </button>
        </div>
    </div>
{% endif %}
<div class="row" style="width: 99%">
    <div class="col-lg-2">
        <ul class="nav nav-pills nav-stacked">
            {% for e in admin_menu_elements %}
                <li{% if admin_part == e.uri %} class="active"{% endif %}><a
                            href="{{ panel_base_uri }}/{{ e.uri }}">
                        <i class="{{ e.icon }}"></i>&nbsp;
                        {{ e.name }}
                    </a></li>
            {% endfor %}
        </ul>
    </div>
    <div class="col-lg-10">
        {% if container.type == 'text' %}
            {{ container.text }}
        {% elseif container.type == 'listing' %}
            <ul class="nav nav-pills nav-stacked">
                {% for e in container.data %}
                    <li>
                        <div class="btn-group">
                            <a class="btn btn-default" href="#">
                                <i class="icon-eye-open icon-white"></i>&nbsp;
                                {% for h in container.fields_displayable %}
                                    <span class="field-{{ container.fields[h].type }}">{{ e[h] }}</span>
                                {% endfor %}
                            </a>
                            <button class="btn btn-default dropdown-toggle" type="button" onclick="deleteElement(this)">
                                <span class="icon-remove icon-white"></span>
                            </button>
                        </div>
                    </li>
                {% endfor %}
            </ul>
            {% if pagination %}
                <ul class="pagination">
                    {% if pagination.current_id != 1 %}
                        <li><a href="{{ panel_base_uri }}/{{ admin_part }}">1</a></li>{% endif %}
                    {% if pagination.prev_id and pagination.prev_id != 1 %}
                        <li>
                        <a href="{{ panel_base_uri }}/{{ admin_part }}/page_{{ pagination.prev_id }}">{{ pagination.prev_id }}</a>
                        </li>{% endif %}
                    <li class="active"><a href="#">{{ pagination.current_id }}</a></li>
                    {% if pagination.next_id %}
                        <li>
                            <a href="{{ panel_base_uri }}/{{ admin_part }}/page_{{ pagination.next_id }}">{{ pagination.next_id }}</a>
                        </li>
                        {% if pagination.total_pages > pagination.next_id %}
                            <li>
                                <a href="{{ panel_base_uri }}/{{ admin_part }}/page_{{ pagination.total_pages }}">{{ pagination.total_pages }}</a>
                            </li>
                        {% endif %}
                    {% endif %}
                </ul>
            {% endif %}
        {% else %}
        {% endif %}
    </div>
</div>

<script src="{{ resource.jquery_js }}"></script>
<script src="{{ resource.ldt_js }}"></script>
<script src="{{ resource.bootstrap_js }}"></script>
<script type="text/javascript">
    function deleteElement(element) {

        $(element).parent().parent().fadeOut();
        var nCounter = $("#display-info-total");
        var result = (nCounter.html())*1-1;
        nCounter.html(result);
    }
    $(document).ready(function () {
        var ldt = new LocalizedDate(4);
        $(".field-datetime").each(function () {
            $(this).html(ldt.localize($(this).html())).removeClass("dtl10n")
        })
    })
</script>
</body>
</html>