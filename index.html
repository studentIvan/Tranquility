<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Tranquility - PHP Content Management Framework</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/studentIvan/Tranquility">Fork On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/studentIvan/Tranquility/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/studentIvan/Tranquility/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Tranquility</h1>
          <p>Php 5.2 content management framework (BSD licensed)</p>
          <hr>
          <span class="credits left">Project maintained by <a href="http://vk.com/student_ivan">Maslov Ivan</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>
        
        <h1>Revolution coming soon!</h1>

        <h2>Tranquility CMF</h2>

<h3>Features</h3>

<ul>
<li>Easy to install and use</li>
<li>Normal work on cheap hostings</li>
<li>Web/PDA automatic difference</li>
<li>Solutions difference</li>
<li>BSD license</li>
</ul><h3>Composition</h3>

<ul>
<li>Twig template engine + plural ends extension</li>
<li>Uri-match routing + basic application architecture</li>
<li>Many global singletons (oh god, why?)</li>
<li>TinyMCE visual editor (disabled for news by default)</li>
<li>JQuery mobile + power admin panel</li>
<li>LocalizedDate.JS</li>
</ul><h3>Requirements</h3>

<ul>
<li>php 5.2.4</li>
<li>pdo mysql</li>
<li>mbstrings (recommended)</li>
</ul><h2>Quick start</h2>

<p>Hi developer. Im told you some basic information about Tranquility. Whats that Tranquility? Tranquility its a content management framework, for increase your php site development speed. You may use ready solutions and make custom. Solutions are portable so as Symfony bundles. Okay, now study framework architecture:</p>

<h3>Framework architecture</h3>

<ul>
<li>
<strong>config</strong> - project configuration directory. Main configuration file config.php and router configuration like routes.php are places here.</li>
<li>
<strong>controllers</strong> - project controllers directory. Controller its simple php class whis public static methods, callable by router.</li>
<li>
<strong>datamappers</strong> - database helpers directory. Data Mapper can contain some helpfull methods, e.g. create, read, update, delete, listing...</li>
<li>
<strong>solutions</strong> - (DRY development) ready usefull solutions for something. Its may be admin panel, blog, internet shop and more more more... Dont repeat yourself!</li>
<li>
<strong>system</strong> - framework scripts. Included cache and classes directories.</li>
<li>
<strong>testing</strong> - this directory containes some scripts for framework test.</li>
<li>
<strong>vendor</strong> - twig places here.</li>
<li>
<strong>views</strong> - twig templates are placed here.</li>
<li>
<strong>webroot</strong> - site root (/). index.php, js, css, images and robots.txt are placed here.</li>
</ul>

<h3>Development installation</h3>
<p>Go to http://yourdomain.com/install and fill the form. After, click &quot;Install&quot; and see your configuration files.</p>

<h3>Solutions</h3>

<p>Solution its a subproject, ready for use. Solution architecture resembles a framework architecture. May be include <strong>controllers</strong>, <strong>models</strong> and <strong>views</strong> directories (MVC), and as well as some scripts: <code>__init__.php</code> and <code>routes.php</code>.</p>

<h3>Routing</h3>

<p>Consider <strong>config/routes.php</strong> script. It is a simple associative array with keys (regular expressions routes) and values (targets). Key example: <code>/hello/(\S+)/?</code>. Value it is a string or array of strings. If you want call view, just write view name, without extension (e.g. hello for views/hello.html.twig). For controller call - write first letter as exclamation mark (!). Variants: <code>!controller:method</code>, <code>!solution:controller:method</code>. Write sample:</p>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="sd">/** file: config/routes.php */</span>
<span class="k">return</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'/hello/world'</span> <span class="o">=&gt;</span> <span class="s1">'hello'</span><span class="p">,</span>
<span class="p">);</span>
</pre>
</div>


<hr><div class="highlight">
<pre><span class="c">&lt;!-- file: views/hello.html.twig --&gt;</span>
Hello <span class="nt">&lt;b&gt;</span>developer<span class="nt">&lt;/b&gt;</span>
</pre>
</div>


<p>Now, go to <strong>/hello/world</strong> and see "Hello developer". Ð¡omplicate it:</p>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="sd">/** file: config/routes.php */</span>
<span class="k">return</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'/hello/(\S+)'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'!hello:demo'</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">),</span>
<span class="p">);</span>
</pre>
</div>


<hr><div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="sd">/** file: controllers/Hello.php */</span>
<span class="k">class</span> <span class="nc">Hello</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">demo</span><span class="p">(</span><span class="nv">$matches</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Process</span><span class="o">::</span><span class="nv">$context</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>
</div>


<hr><div class="highlight">
<pre><span class="c">&lt;!-- file: views/hello.html.twig --&gt;</span>
Hello <span class="nt">&lt;b&gt;</span>{{ name }}<span class="nt">&lt;/b&gt;</span>
</pre>
</div>


<p>After, go to <code>/hello/world</code> and see "Hello world". Fuck yea =)</p>

<h3>Process class</h3>

<p>Process it is a global control class with static variables and methods. The main of them:</p>

<ul>
<li>
<code>Process::$context</code> - associative array, which contains twig template variables.</li>
<li>
<code>Process::getTwigInstance()</code> - simple singleton method, which returns Twig_Environment, for manually work with templates.</li>
</ul><div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="sd">/** file: controllers/Hello.php */</span>
<span class="k">class</span> <span class="nc">Hello</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">demo</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
        <span class="nb">print_r</span><span class="p">(</span><span class="nx">Process</span><span class="o">::</span><span class="nv">$context</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>
</div>


<p>After run this code you will see:</p>

<div class="highlight">
<pre><span class="x">array (</span>
<span class="x">    mobile =&gt; false,</span>
<span class="x">    resource =&gt; array(...),</span>
<span class="x">    uri =&gt; /hello/world,</span>
<span class="x">    cms =&gt; array(...),</span>
<span class="x">)</span>
</pre>
</div>


<hr><ul>
<li>
<code>Process::$context['mobile']</code> - Whether the current user is sitting from mobile phone?</li>
<li>
<code>Process::$context['resource']</code> - array from config.php, <strong>resources</strong> directive.</li>
<li>
<code>Process::$context['uri']</code> - current uri (string), without QUERY_STRING.</li>
<li>
<code>Process::$context['cms']</code> - array from config.php, <strong>cms</strong> directive (for standard solution).</li>
</ul><h3>Standard solution</h3>

<p>"Standard" solution includes admin panel and news feed. Go to <code>/admin/</code> uri and enter login: <strong>Admin</strong>, password: <strong>123456</strong>. You will see news manager, users editor, roles editor, session monitor and cron stress runner.</p>

<h3>Some configuration directives</h3>

<ul>
<li>
<code>developer_mode</code> - turn it off (as false) for increase site speed.</li>
<li>
<code>solutions</code> - array of names of included solutions.</li>
<li>
<code>always_mobile</code> - boolean directive for mobile version debugging.</li>
<li>
<code>server_timezone</code> - server timezone name, default 'Europe/Moscow'.</li>
<li>
<code>resources</code> - callable from templates (e.g. <code>{{ resource.jquery_js }}</code>).</li>
<li>
<code>pdo</code> - array of pdo configuration. Contains <strong>dsn</strong>, <strong>username</strong> and <strong>password</strong>.</li>
<li>
<code>security_token</code> - secret key for passwords generation, cross site request forgery protection and more.</li>
<li>
<code>session</code> - array, which contains <strong>bot_role</strong>, <strong>guest_role</strong>, <strong>lifetime_hours</strong>, <strong>referers</strong> and <strong>garbage_auto_dump</strong> directives.</li>
<li>
<code>cms</code> - array for <strong>standard</strong> solution configuration.</li>
</ul>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
    
  </body>
</html>
